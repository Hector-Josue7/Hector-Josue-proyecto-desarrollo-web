doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    title Page Title
    meta(name='viewport', content='width=device-width, initial-scale=1')
    link(rel='stylesheet', href='css/bootstrap.min.css')
    script(src='js/jquery-3.3.1.min.js')
    style(type='text/css', media='screen').
      div.editor {
      position: relative;
      top: 0px;
      right: 0;
      bottom: 0;
      left: 0;
      width:auto;
      height: 330px;
      }
      #result{
      border:none;
      width:100%;
      height:220px;}
  body
    nav.navbar.navbar-expand-lg.navbar-light.bg-light
      a.navbar-brand(href='#') Navbar
      button.navbar-toggler(type='button', data-toggle='collapse', data-target='#navbarSupportedContent', aria-controls='navbarSupportedContent', aria-expanded='false', aria-label='Toggle navigation')
        span.navbar-toggler-icon
      #navbarSupportedContent.collapse.navbar-collapse
        ul.navbar-nav.mr-auto
          li.nav-item.active
            a.nav-link(href='#')
              | Home 
              span.sr-only (current)
          li.nav-item
            a.nav-link(href='#') Link
          li.nav-item.dropdown
            a#navbarDropdown.nav-link.dropdown-toggle(href='#', role='button', data-toggle='dropdown', aria-haspopup='true', aria-expanded='false')
              | Dropdown
            .dropdown-menu(aria-labelledby='navbarDropdown')
              a.dropdown-item(href='#') Action
              a.dropdown-item(href='#') Another action
              .dropdown-divider
              a.dropdown-item(href='#') Something else here
          li.nav-item
            a.nav-link.disabled(href='#') Disabled
        form.form-inline.my-2.my-lg-0
          input.form-control.mr-sm-2(type='search', placeholder='Search', aria-label='Search')
          button.btn.btn-outline-success.my-2.my-sm-0(type='submit') Search
    .container-fluid
      .row
        #editorHTML.col-xl-4.col-lg-4.col-md-4.col-4.col-sm-4.editor
        #editorCSS.col-xl-4.col-lg-4.col-md-4.col-4.col-sm-4.editor
        #editorJavaScript.col-xl-4.col-lg-4.col-md-4.col-4.col-sm-4.editor
      .row
        .col-xl-12.col-lg-12.col-md-12.col-12.col-sm-12
          iframe#result
    script(src='js/bootstrap.min.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/ace/1.3.1/ace.js', type='text/javascript')
    script(src='js/html.js')
    script(src='js/ace.js', type='text/javascript ', charset=' utf-8')
    script(src='js/css.js')
    script(src='js/mode-html.js', type='text/javascript', charset='utf-8')
    script(src='js/mode-css.js', type='text/javascript', charset='utf-8')
    script(src='js/mode-javascript.js', type='text/javascript', charset='utf-8')
    script(type='text/javascript', src='js/ext-language_tools.js')
    script(type='text/javascript').
      /*
      var editorHTML = ace("editorHTML");
      editorHTML.setTheme("ace/theme/monokai");
      editorHTML.session.setMode("ace/mode/html");
      var editorCSS = ace.edit("editorCSS");
      editorCSS.setTheme("ace/theme/monokai");
      editorCSS.session.setMode("ace/mode/css");
      */
      /*EDITOR HTML*/
      var eh = ace.edit("editorHTML",{
      selectionStyle: "text",
      value: `<html>
      <head>
      <title>titulo del sitio web</title>
      </head>
      <body>
      <h1>Hola mundo</h1>
      <ul>
      <li>Coffee</li>
      <li>Tea</li>
      <li>Milk</li>
      </ul>
      <p><button onclick="myMove()">Click Me</button></p>
      <div id ="container">
      <div id ="animate"></div>
      </div>
      </body>
      </html>`
      })
      eh.setTheme("ace/theme/monokai");
      eh.session.setMode("ace/mode/html");
      eh.setOptions({
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true,
      enableBasicAutocompletion: true,
      autoScrollEditorIntoView: true,
      });
      /*EDITOR CSS*/
      var ec = ace.edit("editorCSS", {
      selectionStyle: "text",
      value:`#container {
      width: 400px;
      height: 400px;
      position: relative;
      background: yellow;
      }
      #animate {
      width: 50px;
      height: 50px;
      position: absolute;
      background-color: red;
      }
      body{
      background: #43cea2;  /* fallback for old browsers */
      background: -webkit-linear-gradient(to bottom, #185a9d, #43cea2);  /* Chrome 10-25, Safari 5.1-6 */
      background: linear-gradient(to bottom, #185a9d, #43cea2); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
      }
      `
      });
      ec.setTheme("ace/theme/monokai");
      ec.session.setMode("ace/mode/css");
      ec.setOptions({
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true,
      enableBasicAutocompletion: true
      //   autoScrollEditorIntoView: true
      });
      //    editorCSS.session.setMode("ace/mode/css");
      /*EDITOR JAVASCRIPT*/
      var ej = ace.edit("editorJavaScript",{
      selectionStyle: "text",
      value: `
      function myMove() {
      var elem = document.getElementById("animate");
      var pos = 0;
      var id = setInterval(frame, 5);
      function frame() {
      if (pos == 350) {
      clearInterval(id);
      } else {
      pos++;
      elem.style.top = pos + "px";
      elem.style.left = pos + "px";
      }
      }
      }
      `
      });
      ej.setTheme("ace/theme/monokai");
      ej.session.setMode("ace/mode/javascript");
      ej.setOptions({
      enableBasicAutocompletion: true,
      enableSnippets: true,
      enableLiveAutocompletion: true,
      enableBasicAutocompletion: true,
      autoScrollEditorIntoView: true,
      selectionStyle: "text"
      });
      eh.getSession().on('change', function(){
      update();
      });
      ec.getSession().on('change', function(){
      update();
      });
      ej.getSession().on('change', function(){
      update();
      //update2();
      });
      /*
      var iframeBody=$('iframe').contents().find('body');
      iframeBody.attr('contenteditable', true);
      $(iframeBody).on( 'keyup',function() {
      var txt = $(this).html();
      $('div').html(txt);
      });
      */
      function update(){
      var res = document.getElementById("result").contentWindow.document;
      res.open();
      res.write(eh.getValue());
      res.write('<style>'+ec.getValue()+'</style>');
      res.close();
      };
      function update2(){
      document.getElementById("result").contentWindow.eval($("#editorJavaScript").val());
      };
      update();
      update2();
